/*
 * Copyright Â© 2018 Rasmus Hansen
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

// Code Generated by go run scripts/embedTemplates DO NOT EDIT.

package templates

import "html/template"

type templateContent struct {
	Filename string
	Content  string
}

var contents = []templateContent{

	{
		Filename: "embed",
		Content:  "<!doctype html><html lang=en><meta charset=utf-8><title>Feedback</title><form method=post action=/ onsubmit=\"return handleSubmit(event)\" id=form><label>Message\n<textarea id=message name=message required></textarea></label>\n<label>Contact address\n<input type=email name=contactAddress id=email></label>\n<label>Attach files\n<input type=file name=files id=files multiple></label>\n<button>\nSend feedback</button></form><script>function handleSubmit(event){console.log(event);var form=document.getElementById('form');var fd=new FormData(form);var xhr=new XMLHttpRequest();xhr.addEventListener('load',function(event){console.log('submitted without issues',event);});xhr.addEventListener('error',function(event){console.error('something went wrong when submitting feedback',event);});xhr.open('POST',form.action);xhr.setRequestHeader('Accept','application/json');xhr.send(fd);return false;}</script>",
	},

	{
		Filename: "feedback-created",
		Content:  "<!doctype html><html lang=en><meta charset=utf-8><title>Feedback created</title>Hello WelD!!\n<script>if(window){console.log(\"I'm alive mutha\")}</script>",
	},

	{
		Filename: "feedback-list",
		Content:  "<!doctype html><html lang=en><meta charset=utf-8><title>Feedback list</title>{{template \"header\" .AuthState}}<main>{{if .Feedback}}<style>.flex{display:flex}.flex.column{flex-direction:column}.flex.row{flex-direction:row}.flex.wrap{flex-wrap:wrap}.feedback-list{margin:0 1rem}.feedback-item{flex:0 0 auto;min-height:0;box-shadow:0 0 15px #00000026;margin-bottom:1rem;border-radius:.5rem;padding:1rem;box-sizing:border-box}.feedback-item-header{flex:0 0 3rem;align-items:center}.feedback-item-filler{flex:1}.feedback-item-header-button{text-decoration:none;margin-left:.3rem;height:3rem;color:#fff;background-color:#b63332;border:0}.feedback-item-attachment{background:no-repeat 50%;background-size:contain;position:relative;height:10rem;width:10rem;margin:1rem}.feedback-item-attachment-button{text-decoration:none;border:0;background-color:#b63332;color:#fff;padding:.5rem;line-height:1rem;box-sizing:border-box;font-size:1rem;display:inline-block}.feedback-item-message{width:100%;padding:1rem;margin-top:.5rem;box-sizing:border-box;color:#000}.feedback-item-attachments{max-width:100%;padding:1rem}.feedback-item-body-item{border:1px solid #ebebeb}.feedback-item-body-item:first-child{border-top-left-radius:3px;border-top-right-radius:3px}.feedback-item-body-item:last-child{border-bottom-left-radius:3px;border-bottom-right-radius:3px}.contact-address{color:#000}</style><div class=\"feedback-list flex column\">{{range .Feedback}}<div class=\"feedback-item flex column\"><div class=\"feedback-item-header flex row\">{{if .ContactAddress}}\n<span>From <a class=contact-address href=mailto:{{.ContactAddress}}>{{.ContactAddress}}</a></span>\n{{else}}\n<span>No contact address provided</span>\n{{end}}\n<span class=feedback-item-filler></span><button class=feedback-item-header-button>\nMark as read</button>\n<button class=feedback-item-header-button>\nReply</button></div><div class=\"feedback-item-body flex column\"><div class=\"feedback-item-message feedback-item-body-item\">{{.Message}}</div>{{if .Files}}<div class=\"feedback-item-attachments feedback-item-body-item flex row wrap\">{{range .Files}}\n{{if .IsImage}}<div class=feedback-item-attachment style=background-image:url(/files/{{.Id}})><a href=/files/{{.Id}} download class=feedback-item-attachment-button>Download</a>\n<button class=feedback-item-attachment-button>\nPreview</button></div>{{else}}<div class=feedback-item-attachment><a href=/files/{{.Id}} download class=feedback-item-attachment-button>Download</a></div>{{end}}\n{{end}}</div>{{end}}</div></div>{{end}}</div>{{else}}<style>.no-feedback{margin:auto}</style><div class=no-feedback>No feedback has been sent so far.</div>{{end}}</main>",
	},

	{
		Filename: "file-not-found",
		Content:  "<!doctype html><html lang=en><meta charset=utf-8><title>Title</title>",
	},

	{
		Filename: "header",
		Content:  "<div class=header><span class=filler></span>{{if .Authenticated}}\n<a href=/logout class=header-button onclick=\"return logout()\">Logout</a>\n{{else}}\n<a href=/login class=header-button>Login</a>\n{{end}}</div><style>body{margin:0}.header{display:flex;flex-direction:row;align-items:center;height:3rem;box-sizing:border-box}.filler{flex:1}.header-button{text-decoration:none;border:0;background-color:#b63332;color:#fff;padding:.5rem;line-height:1rem;box-sizing:border-box;font-size:1rem;display:flex;align-items:center;justify-content:center;margin-right:1rem}</style><script>function logout(){localStorage.removeItem('token');return true;}</script>",
	},

	{
		Filename: "login",
		Content:  "<!doctype html><html lang=en><meta charset=utf-8><title>Title</title>{{template \"header\" .AuthState}}<div><form method=post action=/login onsubmit=\"return login(event)\" id=login-form><label>Email\n<input type=email name=email id=email></label>\n<label>Password\n<input type=password name=password id=password></label>\n<button>\nLogin</button></form></div><script>var urlParams={};(function init(){var match,pl=/\\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl,\" \"));},query=window.location.search.substring(1);while(match=search.exec(query))\nurlParams[decode(match[1])]=decode(match[2]);})();function login(event){console.log(event);var form=document.getElementById('login-form');var fd=new FormData(form);var xhr=new XMLHttpRequest();xhr.addEventListener('load',function(event){var response=JSON.parse(xhr.responseText);if(response.token){console.log('login was successful');localStorage.setItem('token',response.token);if(urlParams.returnUrl){window.location.replace(urlParams.returnUrl);}else{window.location.replace('/');}}else{console.log('Got response',event);}});xhr.addEventListener('error',function(event){console.error('Request failed',event);});xhr.open('POST','/login');xhr.setRequestHeader('Accept','application/json');xhr.send(fd);return false;}</script>",
	},
}

func getTemplates() (*template.Template, error) {
	var t *template.Template

	for _, file := range contents {

		filename := file.Filename
		var tmpl *template.Template
		if t == nil {
			t = template.New(filename)
		}

		if filename == t.Name() {
			tmpl = t
		} else {
			tmpl = t.New(filename)
		}
		_, err := tmpl.Parse(file.Content)
		if err != nil {
			return nil, err
		}
	}

	return t, nil
}
